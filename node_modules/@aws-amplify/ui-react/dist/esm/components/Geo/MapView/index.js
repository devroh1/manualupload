import{__rest as i,__awaiter as o}from"../../../node_modules/tslib/tslib.es6.js";import{jsx as e}from"react/jsx-runtime";import{forwardRef as t,useMemo as r,useState as l,useEffect as a}from"react";import m from"maplibre-gl";import{AmplifyMapLibreRequest as n}from"maplibre-gl-js-amplify";import s from"react-map-gl";import{Amplify as p,Auth as d}from"aws-amplify";const u=t(((t,u)=>{var v,{mapLib:c,mapStyle:f,style:g}=t,y=i(t,["mapLib","mapStyle","style"]);const b=p.configure(),j=r((()=>{var i,o,e,t;return null!==(t=null!==(o=null===(i=b.geo)||void 0===i?void 0:i.amazon_location_service)&&void 0!==o?o:null===(e=b.geo)||void 0===e?void 0:e.AmazonLocationService)&&void 0!==t?t:{}}),[b]),[w,h]=l(),L=r((()=>Object.assign({height:"100vh",position:"relative",width:"100vw"},g)),[g]);return a((()=>{o(void 0,void 0,void 0,(function*(){const i=yield d.currentUserCredentials();if(i){const{region:o}=j,{transformRequest:e}=new n(i,o);h((()=>e))}}))}),[j]),w?e(s,Object.assign({},y,{mapLib:null!=c?c:m,mapStyle:null!=f?f:null===(v=j.maps)||void 0===v?void 0:v.default,ref:u,style:L,transformRequest:w})):null}));u.displayName="MapView";export{u as MapView};
