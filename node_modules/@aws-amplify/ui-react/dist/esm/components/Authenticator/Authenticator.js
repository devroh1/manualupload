import{jsx as s,Fragment as e}from"react/jsx-runtime";import*as t from"react";import{Provider as o,useAuthenticator as r}from"./hooks/useAuthenticator/index.js";import{CustomComponentsContext as i}from"./hooks/useCustomComponents/index.js";import"../../primitives/View/View.js";import{Router as n}from"./Router/Router.js";import{SetupTOTP as m}from"./SetupTOTP/SetupTOTP.js";import{SignIn as u}from"./SignIn/SignIn.js";import{SignUp as a}from"./SignUp/SignUp.js";import{ForceNewPassword as c}from"./ForceNewPassword/ForceNewPassword.js";import"./ResetPassword/ConfirmResetPassword.js";import{ResetPassword as p}from"./ResetPassword/ResetPassword.js";import{defaultComponents as d}from"./hooks/useCustomComponents/defaultComponents.js";function f({children:o,className:m,components:u,formFields:a,hideSignUp:c,initialState:p,loginMechanisms:f,signUpAttributes:g,services:l,socialProviders:j,variation:P}){const{route:h,signOut:w,user:S}=r((({route:s,signOut:e,user:t})=>[s,e,t]));!function(s){const{_send:e,route:o}=r((({route:s})=>[s])),i=t.useRef(!1);t.useEffect((()=>{i.current||"setup"!==o||(e({type:"INIT",data:s}),i.current=!0)}),[e,o,s])}({initialState:p,loginMechanisms:f,services:l,signUpAttributes:g,socialProviders:j,formFields:a});const O=t.useMemo((()=>({components:Object.assign(Object.assign({},d),u)})),[u]);return"authenticated"===h||"signOut"===h?o?s(e,{children:"function"==typeof o?o({signOut:w,user:S}):o}):null:s(i.Provider,Object.assign({value:O},{children:s(n,{className:m,hideSignUp:c,variation:P})}))}function g(e){return s(o,{children:s(f,Object.assign({},e))})}g.Provider=o,g.ResetPassword=p,g.SetupTOTP=m,g.SignIn=u,g.SignUp=a,g.ForceNewPassword=c;export{g as Authenticator,f as AuthenticatorInternal};
