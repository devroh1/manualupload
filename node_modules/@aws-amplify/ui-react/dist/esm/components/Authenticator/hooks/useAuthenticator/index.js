import{jsx as e}from"react/jsx-runtime";import*as t from"react";import{getSendEventAliases as r,createAuthenticatorMachine as s,listenToAuthHub as o,getServiceContextFacade as n}from"@aws-amplify/ui";import{useSelector as i,useInterpret as c}from"@xstate/react";import a from"lodash/isEmpty";import{areArrayValuesEqual as u}from"../../../../helpers/utils.js";const m=t.createContext({}),p=({children:r})=>{const n=t.useContext(m),i=c(s),u=t.useMemo((()=>a(n)?{service:i}:n),[n,i]),{service:p}=u;return t.useEffect((()=>o(p)),[p]),e(m.Provider,Object.assign({value:u},{children:r}))},f=e=>{const s=(()=>{const{service:e}=t.useContext(m);if(!e)throw new Error("Please ensure you wrap your App with `Authenticator.Provider`.\nSee the `useAuthenticator` section on https://ui.docs.amplify.aws/connected-components/authenticator.");return e})(),{send:o}=s,c=t.useMemo((()=>r(o)),[o]),a=i(s,(e=>(e=>Object.assign(Object.assign({},c),n(e)))(e)),((t,r)=>{if(!e)return!1;const s=e(t),o=e(r);return u(s,o)}));return Object.assign(Object.assign({},a),{_state:s.getSnapshot(),_send:o})};export{m as AuthenticatorContext,p as Provider,f as useAuthenticator};
